(function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};if("undefined"==typeof Backbone||null===Backbone)throw Error("Backbone is not defined. Please include the latest version from http://documentcloud.github.com/backbone/backbone.js");Backbone.Marionette.Modals=function(i){function o(){return this.close=e(this.close,this),t=o.__super__.constructor.apply(this,arguments)}return n(o,i),o.prototype.modals=[],o.prototype.zIndex=0,o.prototype.show=function(t,e){var i,n,o,s;for(null==e&&(e={}),this.ensureEl(),t.render(),this.$el.show(),this.$el.append(t.el),Marionette.triggerMethod.call(t,"show"),Marionette.triggerMethod.call(this,"show",t),this.currentView=t,s=this.modals,n=0,o=s.length;o>n;n++)i=s[n],i.undelegateModalEvents();return t.on("modal:close",this.close),this.modals.push(t),this.zIndex++},o.prototype.close=function(){var t;return t=this.currentView,t&&!t.isClosed?(t.close?t.close():t.remove&&t.remove(),t.off("modal:close",this.close),this.modals.splice(_.indexOf(this.modals,t),1),this.zIndex--,this.currentView=this.modals[this.zIndex-1],0===this.zIndex?this.$el.hide():_.last(this.modals).delegateModalEvents(),Marionette.triggerMethod.call(this,"close")):void 0},o.prototype.closeAll=function(){var t,e,i,n,o;for(n=this.modals,o=[],e=0,i=n.length;i>e;e++)t=n[e],o.push(this.close());return o},o}(Backbone.Marionette.Region)}).call(this);