(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},n=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1};if("undefined"==typeof Backbone||null===Backbone)throw Error("Backbone is not defined. Please include the latest version from http://documentcloud.github.com/backbone/backbone.js");Backbone.Modal=function(e){function o(){this.triggerView=t(this.triggerView,this);var e;e=Array.prototype.slice.apply(arguments),Backbone.View.prototype.constructor.apply(this,e),this.setUIElements(),this.delegateModalEvents()}return i(o,e),o.prototype.setUIElements=function(){var t;if(t=this.getOption("template"),this.views=this.getOption("views"),this.viewContainer=this.getOption("viewContainer"),_.isUndefined(this.template)&&_.isUndefined(this.views))throw Error("No template or views defined for Backbone.Modal");if(this.template&&this.views&&_.isUndefined(this.viewContainer))throw Error("No viewContainer defined for Backbone.Modal")},o.prototype.getOption=function(t){return t?this.options&&n.call(this.options,t)>=0&&null!=this.options[t]?this.options[t]:this[t]:void 0},o.prototype.delegateModalEvents=function(){var t,e,i,n,o,r,s;t=this.getOption("cancelEl"),o=this.getOption("submitEl"),this.$el.on("click",o,this.triggerSubmit),this.$el.on("click",t,this.triggerSubmit),s=[];for(e in this.views)i=e.match(/^(\S+)\s*(.*)$/),r=i[1],n=i[2],s.push(this.$el.on(r,n,this.views[e],this.triggerView));return s},o.prototype.buildView=function(t){return _.isFunction(t)?new t instanceof Backbone.View?new t(this.options):t(this.options):t},o.prototype.triggerView=function(t){var e;return"function"==typeof t.preventDefault&&t.preventDefault(),e=t.data},o.prototype.triggerSubmit=function(t){return t.preventDefault()},o.prototype.triggerCancel=function(t){return t.preventDefault()},o.prototype.openAt=function(t){var e,i,n;e=0;for(i in this.views)e===t&&(n=this.views[i]),e++;return n?this.triggerView({data:n}):void 0},o}(Backbone.View)}).call(this);